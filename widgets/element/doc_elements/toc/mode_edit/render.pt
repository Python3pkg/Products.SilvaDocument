<init tal:omit-tag=""
      tal:define="
        global node request/node;
        global disable_notes python:1;
        global toc_depth python:int(test(node.hasAttribute('toc_depth'), node.getAttribute('toc_depth'), -1));
" />

<div metal:use-macro="container/macro_edit_view/macros/edit_view">
<div metal:fill-slot="edit_input" tal:omit-tag="">
  <toc tal:replace="structure here/content" />
</div>
<div metal:fill-slot="element_controls" tal:omit-tag="">
Table of contents depth: 
<select class="manipulator"
  name="toc_depth">
  <option value="0" 
    tal:attributes="selected python:test(toc_depth == 1 - 1, 'selected', nothing)">
    1 level
  </option>
  <loop 
    tal:omit-tag="" 
    tal:repeat="ittr python:range(2,10)">
    <option 
      tal:attributes="
        value python:ittr - 1;
        selected python:test(toc_depth == ittr - 1, 'selected', nothing)">
      <span tal:replace="ittr" />
      levels
    </option>
  </loop>
  <option value="-1" 
    tal:attributes="selected python:test(toc_depth == -1, 'selected', nothing)">
    unlimited
  </option>
</select>
</div>
</div>
