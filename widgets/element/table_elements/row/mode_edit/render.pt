<init tal:omit-tag=""
  tal:define="global disable_notes python:1; 
              global is_embedded python:1" />
<div metal:use-macro="container/macro_edit_view/macros/edit_view">
<div metal:fill-slot="edit_input" tal:omit-tag="">
  <table width="100%" class="listing" cellspacing="0"  border="0">
    <tbody>
      <tr valign="top"><content tal:replace="structure here/editable_content" /></tr>
      <tr class="inter-controls"
          tal:define="fields python:[child for child in node.childNodes if child.nodeType == node.ELEMENT_NODE];
                      totalwidth python:sum([int(f.getAttribute('colspan') or 1) for f in fields])">
        <tal:block repeat="field python:fields">
          <td tal:define="num python:repeat['field'].number();
                          colspan python:int(field.getAttribute('colspan') or 1);
                          width python:100.0 / totalwidth * colspan"
              tal:attributes="width python:'%d%%' % (width,)"
              class="align-right">
            
            <label tal:attributes="for string:rowFieldType_${num}"
                   tal:content="string:field ${num} type:" />
            <select tal:attributes="name string:rowFieldType_${num};
                                    id string:rowFieldType_${num};"
                    size="1">
              <option value="td" tal:attributes="selected python:field.getAttribute('fieldtype') != 'th' and 'selected'">normal</option>
              <option value="th" tal:attributes="selected python:field.getAttribute('fieldtype') == 'th' and 'selected'">header</option>
            </select><br />
            <tal:block condition="python: colspan > 1">
              <label tal:attributes="for string:split_${num}"
                     tal:content="string:split field ${num} (current colspan: ${colspan})" />
              <input type="checkbox" value="split"
                     tal:attributes="id string:split_${num};
                                     name string:split_${num}" />
              <br />
            </tal:block>
            <tal:block condition="python: num < len(fields)">
              <label tal:attributes="for string:merge_${num}"
                     tal:content="string:merge field ${num} with next" />
              <input type="checkbox" value="merge with next"
                     tal:attributes="id string:merge_${num};
                                     name string:merge_${num}" />
            </tal:block>
          </td>
        </tal:block>
      </tr>
    </tbody>
  </table>

</div>
</div>
